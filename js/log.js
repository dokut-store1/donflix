const firebaseConfig={apiKey:"AIzaSyBI_6e7KQs4NBJ9ZaLe1FaPxV3xcYE8t3g",authDomain:"donflix-a85da.firebaseapp.com",databaseURL:"https://donflix-a85da-default-rtdb.firebaseio.com",projectId:"donflix-a85da",storageBucket:"donflix-a85da.firebasestorage.app",messagingSenderId:"236646922585",appId:"1:236646922585:web:d5a6778879dfb58eb03448"};firebase.initializeApp(firebaseConfig);function mostrarMensaje(texto,tipo="error"){const mensaje=document.createElement("div");mensaje.className=`mensaje ${tipo}`;mensaje.textContent=texto;document.body.appendChild(mensaje);setTimeout(()=>{mensaje.classList.add("visible")},100);setTimeout(()=>{mensaje.classList.remove("visible");setTimeout(()=>mensaje.remove(),500)},3000)}
function login(){const email=document.getElementById("email").value;const password=document.getElementById("password").value;firebase.auth().signInWithEmailAndPassword(email,password).then((userCredential)=>{const user=userCredential.user;firebase.database().ref('usuarios/'+user.uid).once('value',(snapshot)=>{const usuarioData=snapshot.val();if(usuarioData){mostrarMensaje("Bienvenido, "+usuarioData.nombre,"exito");setTimeout(()=>{window.location.href="index.html"},2000)}else{mostrarMensaje("Datos del usuario no encontrados.")}}).catch((error)=>{mostrarMensaje("Error al obtener los datos del usuario: "+error.message)})}).catch((error)=>{mostrarMensaje("Error al iniciar sesión: "+error.message)})}
function mostrarModal(){document.getElementById("modal-reset").style.display="flex"}
function cerrarModal(){document.getElementById("modal-reset").style.display="none"}
function verificarYEnviar(){const email=document.getElementById("reset-email").value;if(!email){mostrarMensaje("Por favor, ingresa un correo electrónico válido.");return}
firebase.database().ref('usuarios').once('value',(snapshot)=>{let correoEncontrado=!1;snapshot.forEach((childSnapshot)=>{const usuario=childSnapshot.val();if(usuario.email===email){correoEncontrado=!0}});if(correoEncontrado){firebase.auth().sendPasswordResetEmail(email).then(()=>{mostrarMensaje("Se ha enviado un enlace de restablecimiento a tu correo.","exito");cerrarModal()}).catch((error)=>{mostrarMensaje("Error al enviar el enlace: "+error.message)})}else{mostrarMensaje("El correo no existe en nuestra base de datos.")}})}